<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Natty's Website</title><!--tab label-->
        <link id="stylesheet" rel="stylesheet" href="styleHome.css">
        <link rel="icon" href="">
    </head>
    <body>
        <header>
        </header>
        <nav>
            <a class="nav-button" href="index.html">home</a>
            <a class="nav-button" href="about/homeAbout.html">about</a>
            <a class="nav-button" href="projects/homeProjects.html">projects</a>
            <a class="nav-button" href="pictures/homePictures.html">pictures</a>
        </nav>
        <main>
            <div class="center">
                <a href="controlDiagram.png" title="PID controller diagram" target="_blank">
                    <img class="small-banner" src="controlDiagram.png">
                </a>
            </div>
            <h2>PIDs: What are they and how do they work?</h2>
            <h3>Or, how to cook ribs perfectly for your beach cookout</h3>
            <p>
                I first encountered proportional-integral-derivative, or PID, control in a 
                setting that until recently was unpopulated by this technology: consumer 
                electronics. Even more uncommon was that the consumer electronic that 
                introduced me to this technology was an instrument used for cooking, an 
                area which on the surface is devoid of innovation and has relied on age-old 
                technology since its humble beginnings.
            <p>
                One summer afternoon, waking up from a night of high-school-aged debauchery 
                at my friend's house, I meandered into his kitchen to find his father bent over 
                a YETI cooler with a cord running from it, plugged into the wall and steam 
                emanating from within. Of course I was intrigued. I ventured over to inquire 
                about what in fact I was witnessing. 
            <p>
                Peering into the cooler, I saw hunks of vacuum-sealed ribs bobbing in 
                turbulent water and off to the side a slim cylinder clipped to the side of 
                the cooler with a cord running to an outlet. I asked him what exactly I was 
                looking at.
            <p>
                "Sous vide," he said, like I was supposed to know what that meant.
            <p>
                "What's that?," I replied.
            <p>
                He told me about this modern cooking technique, naturally modeled after a 
                traditional French cooking style, of using warm water to raise the internal 
                temperature of whatever is submerged. He was raising the temperature of the 
                ribs in order to bring them to the beach and quickly char the outsides on the 
                grill without having to worry about the meat being cooked through or standing 
                by the grill for half-an-hour while they cooked as one would do normally. I 
                found this quite clever, but still wondered why this contraption was necessary. 
            <p>
                He explained to me the nature of the temperature of water when it is heated on 
                a stove, how it fluctuates depending on many factors&mdash;especially if using a 
                resistive-heat electric stovetop&mdash;and how something called a PID controller, 
                which was found inside his mysterious sous vide cylinder, was able to maintain 
                a stable water temperature so that you could target the internal temperature of 
                whatever you submerged to a decimal degree. I was fascinated.<hr>
            <p>
                Souse vide can be translated from French to mean "under vacuum." While the device
                I described witnessing in my friend's kitchen is often referred to as souse vide or
                a sous vide cooker, more accurate is to call it an immersion circulator and the technique
                itself as souse vide. Though today the technique has found its way into some of the most 
                prestigious restaurants in the world, the technology was originally developed with a much 
                more humble aim. 
            <p>
                The technology and technique were introduced in scientific laboratories 
                to maintain precise temperature control of immersion baths in lab conditions (thanks to the 
                PID control, we're getting to that.) This naturally transitioned to using sous vide for
                purposes like sterilization and pasteurization in settings like hospitals and large-scale
                commerial food producers. They could vacuum seal instruments or food products, immerse them 
                for a certain amount of time, and then remove them with the certainty that they reached the
                specified temperature. Time was being saved and processes were being made safer, a win-win.
            <p>
                Chefs began to realize how this technique could allow them more precise control&mdash;in fact, 
                drastically so&mdash; of the internal temperature of the food they were cooking, most
                importantly the expensive cuts of protein that were notoriosully stubborn in revealing
                the chemistry unfolding within them. It can't be overstated: this changed the game. Souse
                vide cooking has since trickled down to the consumer level and has found its way into 
                kitchens like that of my friend's father. Often overlooked, however, is the true technological
                innovation that made this all possible. Let's take a few steps backwards. 
                <a href="https://www.cooksillustrated.com/articles/1142-the-history-of-sous-vide-explained">
                    Source
                </a>
                <hr>
            <p>
                Feedback control is one of those things that operates under the surface, holds so much
                "control" over the functioning of our modern society, yet rarely gets the props it deserves,
                much less the appreciation of its beneficiaries, most of whom would be incapable of telling
                you what in fact it is or what it does. So I guess that begs the question... what is it and
                what the hell does it do? I'm glad you asked.
            <p>
                The theory of feedback control, i.e. control theory, was developed at, where else, Bell Labs
                in the 1930s. Like most consumer facing technological innovation, control systems have their
                roots in military applications. In WWII, control systems were developed for applications such
                as inteligent rocket control and unmanned aircraft surveillance. Today, control systems govern
                nearly any "system" you can think of, especially those with some sort of autonomy. An immense 
                amount of brain-power is currently being used to devise inteligent algorithms for control systems.
                Do autonomous vehicles, self-landing rockets, humanoid robots ring any bells? (Hey Elon) Control
                systems do just what the sound like: they control systems. Feedback control systems tweak this by
                introducing outputs of the system as inputs back into the system. By correctly interpreting this
                input, or system "feedback," systems can stabilize.
            <p>
                This is done by comparing the feedback of the system to a reference and generating an error as a
                result. Depending on the nature of the error and the system itself, the system may be able respond
                to this feedback by changing its output in a hope to lessen the error present in the system. A
                natural question is why is any of this necessary? As it turns out, many systems are inherently
                unstable or we are unable to construct them without introducing a certain degree of uncertainty.
                Feedback systems allow systems to adapt to these problems without destroying the system or having
                to intermittently stop the system.
            <p>
                There are a few fundamental elements necessary to be familiar with in order to undestand
                the behavior of a feedback control system. They are:
                <ul>
                    <li>
                        the plant: the actual system being controlled. Each plant has different characteristics
                        and behavior.
                    </li>
                    <li>
                        actuators: these are elements of the control system that "allow the manipulation of
                        control variables in a process."
                    </li>
                    <li>
                        sensors: most people are familiar with sensors in that they "sense" what happens around them.
                        Sensors come in any and every form to fit any imaginable applications. They can be used to measure
                        temperature, pressure, velocity, light intensity, etc. 
                    </li>
                    <li>
                        controllers: the brains of the control system. They determine how the system should respond to
                        inputs, more specifically, they tell the actuators how to respond to measurements from the sensors.
                    </li>
                </ul>
            <p>
                One of the simplest and often misunderstood feedback systems present in your daily life
                is the contraption that lives in the back of your toilet. While this is a mechanical feedback
                system, it is a feedback system nonetheless. The actuator in this system is the valve that allows
                water to enter the tank of the toilet. The sensor is the float, or that plastic bulb, that determines at what
                level the water in the tank is currently. The controller is the mechanism with which the float
                can close the valve when it reaches the correct height, or water level. You might think "BFD" but
                this system is actually quite robust. It adapts to low water flow or a faulty drain and ensures
                a constant flush by maintaining the same water level each time. Its something we rarely, if ever,
                think about. That is, until it fails.
            <p>
                Now this control is specified to this application and naturally wouldn't translate to many other
                applications. Therefore it is often necessary to specify a controller to its application. However,
                there are broad classes of controllers that have applications in a broader range of applications.
                One such of these classes, in fact the most commonly used in industry, is PID controllers, commonly 
                referred to simply as PIDs. The proportional-integral-derivative controller consists of three main 
                components that you may have guessed by its name are the proportional controller, the integral controller, 
                and the derivative controller. Note in this sense, that PIDs are controllers constructed from other 
                controllers. Let's break these down individually to understand what a PID is doing as a whole. 
            <p>
                <div class="center">
                    <a href="table.png" title="P, I, and D controller characteristics" target="_blank">
                        <img class="small-banner" src="table.png">
                    </a>
                </div>
                <h4>Proportional Control</h4>
                This may seem rather self explanatory, but it is important to understand how this controller captures
                scenarios that render PIDs as effective as they are. Proportional controllers tend to react quickly, but
                overshoot and thus reduce, but don't minimize, steady-state error. They do this by proportionally scaling 
                the output response relative to the error. This can be seen in the the first term of the equation in Figure 3.
                The remaining error is called static error and will be handled by the integral controller.
                <h4>Integral Control</h4>
                The integral controller "remembers" the error by integrating the error signal over time. It compensates
                with constant gain relative to the cumulative sum of the error. By effectively incrementing it's response
                signal, it is able to close the gap of the static error. In doing so, it also counteracts oscillations that 
                may occur from the proportional controller as the error becomes smaller and smaller. This is seen in the 
                integral term in Figure 3.
                <h4>Derivative Control</h4>
                The derivative controller's response is propoportional to the derivative of the error signal. This is 
                "anticipating" future error and helps to dampen the control signal, or lessen overshoot.
            <p>
                <div class="center">
                    <a href="PIDfunction.png" title="PID control function" target="_blank">
                        <img class="small-banner" src="PIDfunction.png">
                    </a>
                </div>
                As seen in Figure 1 atop the page and evident from the equation in Figure 3, the PID controller works by
                summing the outputs of each independent controller. The PID is only effective if the gain constants K<sub>p</sub>, 
                K<sub>i</sub>, and K<sub>d</sub> are chosen in such a way as to produce stable feedback in the system. A natural
                question is how one goes about choosing or determining these constants. While trial and error can produce acceptable
                results, brute force is usually a last resort. Tuning algrothims, such as Ziegler-Nichols or Åström-Hägglund, among
                others, have been developed to efficiently solve this problem. It can be more helpful to reframe the function in
                Figure 3 to help us understand a little better how this is done. See the figure below.
                <div class="center">
                    <a href="PIDfuncTimeParam.png" title="PID control function with time parameters" target="_blank">
                        <img class="small-banner" src="PIDfuncTimeParam.png">
                    </a>
                </div>
                Figure 4 introduces parameters to represent time values. This is helpful because almost always, what we are
                interested in is how the system responds over time. But in practice, we fail to represent time continuosly
                as we require data that are usable by a computer and thus rely on analog-to-digital converters to represent
                continuous analog inputs as discretized outputs. Therefore, it is necessary to frame our output signal as that
                which would be produced by a digital controller.
                <div class="center">
                    <a href="PIDfuncTimeParamDisc.png" title="PID control function with time parameters, discretized" target="_blank">
                        <img class="small-banner" src="PIDfuncTimeParamDisc.png">
                    </a>
                </div>
                T is sometimes referred to as the "loop cycle." In practice, the loop cycle is determined by the duty cycle
                of the components of the system, namely the actuators. Things like heating elements or valves have
                a working life measured in cycles (more specifically, a probability distribution of cycles), i.e. how many times 
                they heat up and cool down or open and close, etc. Sampling too quickly will wear out components by over-cycling 
                and thus lowering the number of cycles (shifting the distribution and thus lowering the mean in the case of a 
                linear distribution.) For instance, Figure 6 shows a sample model of a PDF vs stress vs time relationship where
                the PDF is a distribution of "reliabilty" over time of some component.
                <div class="center">
                    <a href="PDFstressTime.png" title="PDF vs stress vs time" target="_blank">
                        <img class="small-banner" src="PDFstressTime.png">
                    </a>
                </div>
                We have covered a lot about PIDs and their practical uses, as well as how they are used in industry. Much more
                could be said, but as this post is meant as an introduction to the topic, we will leave our discussion here. Please
                consult the linked references and further readings found at the bottom of the page for more information on this
                interesting topic. A tasty application of PIDs (sous vide) follows.
                <hr>
                <h4>Sous Vide Ribs</h4>
                <h5>What You Will Need</h5>
                <ul>
                    <li>4-qt. Saucepan</li>
                    <li>9 x 13-inch Baking Dish</li>
                    <li>immersion circulator</li>
                    <li>cooler >10qt</li>
                    <li>charcoal grill</li>
                    <li>gallon Ziploc bags</li>
                    <li>paper towels</li>
                    <li>bowl</li>
                    <li>blender</li>
                    <li>cutting board</li>
                    <li>serving platter</li>
                    <li>optional: cryovac machine</li>
                </ul>
                Yield: serves 6<br>
                Time: 2 hours<br>
                <h5>Ingredients</h5>
                <ul>
                    <li>kosher salt, 1/4 cup</li>
                    <li>maple syrup, 1 tbsp.</li>
                    <li>racks baby back pork ribs, sliced in half, 2 X 3lbs.</li>
                    <li>freshly ground black pepper, to taste</li>
                    <li>medium scallions, trimmed, 10 tbsp.</li>
                    <li>peanut oil, 2 tbsp.</li>
                    <li>barbecue sauce, 1 cup</li>
                    <li>coarsely chopped cilantro, 1 cup</li>
                    <li>soy sauce, 1 tbsp.</li>
                </ul>
                <h5>Instructions</h5>
                <ol>
                    <li>
                        In a medium pot over high heat, stir together ¼ cup salt and 8 cups water and cook, 
                        stirring until salt has dissolved, 2–3 minutes. Remove from heat, stir in the maple syrup, 
                        and set the brine aside to cool to room temperature.
                    </li>
                    <li>
                        Place the ribs in a 9-by-13-inch baking dish, pour the cooled brine over the meat, 
                        cover with plastic wrap, and refrigerate at least 6 hours or up to overnight. <br>
                        Optionally: place baking dish in your cryovac to quickly infuse the meat.
                    </li>
                    <li>
                        Prepare hot water bath by filling cooler with water and setting immersion circulator to desired
                        temperature and allow to heat up. As it's reaching temp., remove meat from baking dish and place 
                        each half rack in its own Ziploc, making sure to squeeze the air out of each bag. Place the sealed 
                        bags in the hot water bath when it reaches temp. and cook according to the specifications of your
                        immersion circulator.
                    </li>
                    <li>
                        Meanwhile, make the sauce: In a medium bowl, toss the scallions in the peanut oil to coat, 
                        then season lightly with salt. Transfer the scallions to the grill and cook, turning once, 
                        until heavily charred on both sides, about 5 minutes. Transfer to a blender with the barbecue 
                        sauce, cilantro, and soy sauce; puree until smooth and set aside.
                    </li>
                    <li>
                        When the ribs are done, remove them from the hot water bath and let rest at room temp. When cool,
                        your ribs can go into the cooler and are ready for the beach, or can be frozen along with your
                        BBQ sauce to use at a later date.
                    </li>
                    <li>
                        When ready to cook, build a high-heat fire in a charcoal grill. Defrost BBQ sauce. Drain the ribs, discarding the 
                        residual brine, and pat dry with paper towels. Season with salt and pepper. Grill the ribs, turning as needed, 
                        until charred on both sides and just tender, 5-10 minutes per side. Transfer to a platter or cutting 
                        board and set aside. Just before serving, slather the ribs with the reserved sauce. Cut into individual ribs, 
                        transfer to a large platter, and serve.
                    </li>
                </ol>
                Adapted from Sean Brock's baby back rib recipe for Saveur. Fun fact: Sean Brock was one of the first American chefs
                to use the technique of sous vide in his kitchen!
                <hr>
            <br>
            <br>
            Coronado systems intro. to feedback control <a href="https://www.cim.mcgill.ca/~ialab/ev/Intro_control1.pdf">source</a><br>
            UMichigan PID intro. <a href="https://ctms.engin.umich.edu/CTMS/index.php?example=Introduction&section=ControlPID">source</a><br>
            PID control theory <a href="https://www.crystalinstruments.com/blog/2020/8/23/pid-control-theory">source</a><br>
            National Instruments: PID theory <a href="https://www.ni.com/en-us/innovations/white-papers/06/pid-theory-explained.html">source</a><br>
            Figure 1 <a href="https://plcynergy.com/wp-content/uploads/2021/01/PID-controller.jpg" title="PID diagram" target="_blank">source</a><br>
            Figure 6 <a href="https://reliawiki.org/images/7/78/Pdfvstimeandstress.png">source</a><br>
            Rib recipe <a href="https://www.saveur.com/char-smoked-baby-back-ribs-recipe/">source</a><br>

        </main>
        <footer>
            <a class="nav-button" title="email me" href="mailto:nmdavidson@umass.du">email me</a>
            <p>Copyright</p>
        </footer>
    </body>
</html>
